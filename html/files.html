{{define "files"}}
<div id="upload-file" class="">
  <form
    id="file-form"
    hx-post="/file/new"
    hx-swap="innerHTML"
    hx-target="#display-files"
    hx-select="#display-files"
    hx-on::after-request="if (event.detail.successful) this.reset()"
    hx-encoding="multipart/form-data"
    class="flex space-x-4"
  >
    <label for="file-upload" class="btn">Upload File</label>
    <input type="file" name="file" id="file-upload" multiple hidden />
    <input type="submit" value="Upload" class="btn" />
  </form>
</div>
<div id="display-files" class="mt-4 flex flex-wrap space-x-12 space-y-12">
  {{ range . }}
  <div class="w-40 flex space-x-2 items-center">
    <a download href="/file/{{.Id}}" class="text-center break-all w-full">
      {{.Filename}}
    </a>
    <button
      hx-delete="/file?id={{.Id}}"
      class="bg-slate-600/80 p-2 h-fit rounded-md hover:bg-slate-600/60 duration-100 cursor-pointer"
    >
      <svg
        version="1.1"
        viewBox="0 0 32 32"
        xmlns="http://www.w3.org/2000/svg"
        class="h-4 w-4 fill-red-600"
      >
        <path
          d="m2.1213 30.121a2.8336 2.8336 176.53 004-.24264l23.757-23.757a3 3 90 000-4.2426 2.8336 2.8336 176.53 00-4 .24264l-23.757 23.757a3 3 90 000 4.2426z"
        />
        <path
          transform="matrix(-1,0,0,1,32,0)"
          d="m2.1213 30.121a2.8336 2.8336 176.53 004-.24264l23.757-23.757a3 3 90 000-4.2426 2.8336 2.8336 176.53 00-4 .24264l-23.757 23.757a3 3 90 000 4.2426z"
        />
      </svg>
    </button>
  </div>
  {{end}}
</div>
{{end}} {{template "files" .}}
